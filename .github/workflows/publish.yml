name: Publish to PyPI

on:
  release:
    types: [published]

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      # Check out your repository
      - name: Check out repository
        uses: actions/checkout@v4

      # Set up Python (optional but recommended for build/check steps)
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: "3.x"

      # (Optional) Install dependencies and build package before upload
      - name: Install build tools
        run: python -m pip install --upgrade pip build

      - name: Build package
        run: python -m build

      # Deploy to PyPI using casperdcl/deploy-pypi
      - name: PyPI Deployment
        uses: casperdcl/deploy-pypi@v2.5.0
        with:
          password: ${{ secrets.PYPI_API_TOKEN }}

